<!DOCTYPE html>
<html>
	<!--
		EventTarget.addEvenListener(event,callback);
	-->
	<head>
    	<meta charset="utf-8">

    	<title>TP3 exo1</title>
   		<link rel="stylesheet" type="text/css" href="../style.css">
		<script language = "JavaScript" src = "../js/scriptTP3exo1.js"></script>
  	</head>

  	<body>
    	<header>
      		<h1>TP3 exo1</h1>
    	</header>

    	<nav class = "javascript">
			<ul>
				<li><a href=".././index.html">Acceuil</a></li>
				<li><a href=".././pageHTML.html">html</a></li>
				<li><a href=".././javascript.html">JS</a></li>
				<li><a href=".././page3.html">PHP</a></li>
				<li><a href=".././page4.html">Vue</a></li>
			</ul>
     	</nav>
     	<main>
      		<article>
				<h2>TP3 exo1</h2>
				<p>Le but de cette séance de Travaux Pratiques est de découvrir les requêtes AJAX</p>
				<h3>Animation</h3>
				<canvas id = "canvas", width="600", height = "600"></canvas>
				<h3>Code</h3>
				<pre>
                    let time = 0;
					var canvas;
					var ctx;
					let tblCircle = []

					class Circle {
						constructor(x, y){
							this.x = x;
							this.y = y;
						}
						setX (x) {this.x = x}
						setY (y) {this.y = y}
						getX () {return this.x}
						getY () {return this.y}

						renderCircle () {
							console.log(this.x);
							console.log(this.y);
							ctx.beginPath();
							ctx.arc(this.getX()*6+10, this.getY()*6+10, 10, 0, 2 * Math.PI);
							ctx.stroke()
						}
					}

					function init () {
						canvas = document.getElementById('canvas');
						ctx = canvas.getContext('2d');
						let intervalle = setInterval(gameLoop,1);
					}


					function update () {
						if (time < 1000) {
							var request = new XMLHttpRequest();
							request.onreadystatechange = function() {
								if (request.readyState == XMLHttpRequest.DONE) {
									let coo = JSON.parse(request.responseText);
									let temp = new Circle(coo.x, coo.y);
									temp.renderCircle();
								}
							}
							let rand = Math.floor(Math.random() * 100);
							request.open("GET","https://stwom.herokuapp.com/"+rand, true)
							request.send();
							time = time + 1;
						}
					}

					function gameLoop () {
						update();
					}

					function main () {
						init();
					}

					window.addEventListener("DOMContentLoaded", main);
				</pre>
				<h3>TP2</h3>
				<ul>
					<li><a href = "../tp2/tp_js_2_exo1.html">tp_js_2_exo1.html</a></li>
					<li><a href = "../tp2/tp_js_2_exo2.html">tp_js_2_exo2.html</a></li>
					<li><a href = "../tp2/tp_js_2_exo3.html">tp_js_2_exo3.html</a></li>
					<li><a href = "../tp2/tp_js_2_exo4.html">tp_js_2_exo4.html</a></li>
					
				</ul>
				<h3>TP3</h3>
				<ul>
					<li><a href = "../tp3/tp_js_3_exo1.html">tp_js_3_exo1.html</a></li>
					<li><a href = "../tp3/tp_js_3_exo2.html">tp_js_3_exo2.html</a></li>
				</ul>
      		</article>

			<aside class = "javascript">
				<h2>En relation</h2>
				<ul>
					<li><a href=".././color-palet.html">color palet</a></li>
					<li><a href=".././cv.html">qui suis-je</a></li>
					<li><a href="#"></a>relation3</li>
					<li><a href="#"></a>relation4</li>
				</ul>
			</aside>

		</main>

		<footer>
			<p>©Copyright VINOT Aymeric </p>
		</footer>
  	</body>
</html>